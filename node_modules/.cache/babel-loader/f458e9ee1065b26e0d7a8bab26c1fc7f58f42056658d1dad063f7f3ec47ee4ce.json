{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{fetchAppliedJobs}from\"../services/api\";import{useAuth}from\"../context/AuthContext\";import'../styles/AppliedJobsPage.css';import{Link}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AppliedJobsPage=()=>{const{user}=useAuth();const[appliedJobs,setAppliedJobs]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const getAppliedJobs=async()=>{if(!user){setLoading(false);return;}try{setLoading(true);console.log(\"Fetching applied jobs for user ID:\",user.user_id);const jobs=await fetchAppliedJobs(user.user_id);console.log(\"Applied jobs fetched:\",jobs);setAppliedJobs(jobs||[]);setError(null);}catch(err){console.error(\"Error fetching applied jobs:\",err);setError(\"Failed to load your applied jobs. Please try again later.\");}finally{setLoading(false);}};getAppliedJobs();},[user]);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"applied-jobs-page loading\",children:\"Loading your applications...\"});}if(error){return/*#__PURE__*/_jsxs(\"div\",{className:\"applied-jobs-page error\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Error\"}),/*#__PURE__*/_jsx(\"p\",{children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.location.reload(),children:\"Try Again\"})]});}if(appliedJobs.length===0){return/*#__PURE__*/_jsxs(\"div\",{className:\"applied-jobs-page empty\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Applied Jobs\"}),/*#__PURE__*/_jsx(\"p\",{className:\"no-jobs-message\",children:\"You haven't applied to any jobs yet.\"}),/*#__PURE__*/_jsx(Link,{to:\"/jobs\",className:\"browse-jobs-btn\",children:\"Browse Jobs\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"applied-jobs-page\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Applied Jobs\"}),/*#__PURE__*/_jsx(\"div\",{className:\"applied-jobs-list\",children:appliedJobs.map(job=>/*#__PURE__*/_jsxs(\"div\",{className:\"applied-job-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:job.job_title}),/*#__PURE__*/_jsxs(\"div\",{className:\"job-details\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Country:\"}),\" \",job.country]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Applied on:\"}),\" \",new Date(job.applied_at).toLocaleDateString()]}),/*#__PURE__*/_jsxs(\"div\",{className:\"application-documents\",children:[job.cv_filename&&/*#__PURE__*/_jsx(\"a\",{href:\"http://localhost:8000/uploads/\".concat(job.cv_filename),download:job.cv_filename.split('_').slice(1).join('_'),className:\"download-link\",onClick:e=>{e.preventDefault();window.open(\"http://localhost:8000/uploads/\".concat(job.cv_filename),'_blank');},children:\"View CV\"}),job.cover_letter_filename&&/*#__PURE__*/_jsx(\"a\",{href:\"http://localhost:8000/uploads/\".concat(job.cover_letter_filename),download:job.cover_letter_filename.split('_').slice(1).join('_'),className:\"download-link\",onClick:e=>{e.preventDefault();window.open(\"http://localhost:8000/uploads/\".concat(job.cover_letter_filename),'_blank');},children:\"View Cover Letter\"})]})]})]},\"\".concat(job.job_id,\"-\").concat(job.applied_at)))})]});};export default AppliedJobsPage;","map":{"version":3,"names":["React","useEffect","useState","fetchAppliedJobs","useAuth","Link","jsx","_jsx","jsxs","_jsxs","AppliedJobsPage","user","appliedJobs","setAppliedJobs","loading","setLoading","error","setError","getAppliedJobs","console","log","user_id","jobs","err","className","children","onClick","window","location","reload","length","to","map","job","job_title","country","Date","applied_at","toLocaleDateString","cv_filename","href","concat","download","split","slice","join","e","preventDefault","open","cover_letter_filename","job_id"],"sources":["C:/final_year_project/app/frontend/src/pages/AppliedJobsPage.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { fetchAppliedJobs } from \"../services/api\";\r\nimport { useAuth } from \"../context/AuthContext\";\r\nimport '../styles/AppliedJobsPage.css';\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst AppliedJobsPage = () => {\r\n  const { user } = useAuth();\r\n  const [appliedJobs, setAppliedJobs] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const getAppliedJobs = async () => {\r\n      if (!user) {\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      \r\n      try {\r\n        setLoading(true);\r\n        console.log(\"Fetching applied jobs for user ID:\", user.user_id);\r\n        const jobs = await fetchAppliedJobs(user.user_id);\r\n        console.log(\"Applied jobs fetched:\", jobs);\r\n        setAppliedJobs(jobs || []);\r\n        setError(null);\r\n      } catch (err) {\r\n        console.error(\"Error fetching applied jobs:\", err);\r\n        setError(\"Failed to load your applied jobs. Please try again later.\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    getAppliedJobs();\r\n  }, [user]);\r\n\r\n  if (loading) {\r\n    return <div className=\"applied-jobs-page loading\">Loading your applications...</div>;\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"applied-jobs-page error\">\r\n        <h2>Error</h2>\r\n        <p>{error}</p>\r\n        <button onClick={() => window.location.reload()}>Try Again</button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (appliedJobs.length === 0) {\r\n    return (\r\n      <div className=\"applied-jobs-page empty\">\r\n        <h2>Applied Jobs</h2>\r\n        <p className=\"no-jobs-message\">You haven't applied to any jobs yet.</p>\r\n        <Link to=\"/jobs\" className=\"browse-jobs-btn\">Browse Jobs</Link>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"applied-jobs-page\">\r\n      <h2>Applied Jobs</h2>\r\n      <div className=\"applied-jobs-list\">\r\n        {appliedJobs.map((job) => (\r\n          <div key={`${job.job_id}-${job.applied_at}`} className=\"applied-job-card\">\r\n            <h3>{job.job_title}</h3>\r\n            <div className=\"job-details\">\r\n              <p><strong>Country:</strong> {job.country}</p>\r\n              <p><strong>Applied on:</strong> {new Date(job.applied_at).toLocaleDateString()}</p>\r\n              \r\n              <div className=\"application-documents\">\r\n                {job.cv_filename && (\r\n                  <a \r\n                    href={`http://localhost:8000/uploads/${job.cv_filename}`} \r\n                    download={job.cv_filename.split('_').slice(1).join('_')} \r\n                    className=\"download-link\"\r\n                    onClick={(e) => {\r\n                      e.preventDefault();\r\n                      window.open(`http://localhost:8000/uploads/${job.cv_filename}`, '_blank');\r\n                    }}\r\n                  >\r\n                    View CV\r\n                  </a>\r\n                )}\r\n                \r\n                {job.cover_letter_filename && (\r\n                  <a \r\n                    href={`http://localhost:8000/uploads/${job.cover_letter_filename}`}\r\n                    download={job.cover_letter_filename.split('_').slice(1).join('_')}\r\n                    className=\"download-link\"\r\n                    onClick={(e) => {\r\n                      e.preventDefault();\r\n                      window.open(`http://localhost:8000/uploads/${job.cover_letter_filename}`, '_blank');\r\n                    }}\r\n                  >\r\n                    View Cover Letter\r\n                  </a>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AppliedJobsPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}