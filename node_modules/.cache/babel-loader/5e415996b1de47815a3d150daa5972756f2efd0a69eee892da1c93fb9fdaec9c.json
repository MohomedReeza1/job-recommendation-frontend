{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import{fetchMyPostedJobs,deleteJob}from\"../../services/api\";import{useAuth}from\"../../context/AuthContext\";import\"../../styles/MyPostedJobs.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MyPostedJobs=()=>{const{user}=useAuth();const navigate=useNavigate();const[jobs,setJobs]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{// Redirect if not logged in as a recruiter\nif(!user||user.role!==\"recruiter\"){navigate(\"/employer-login\");return;}const loadJobs=async()=>{try{setLoading(true);const jobsData=await fetchMyPostedJobs();setJobs(jobsData);setError(null);}catch(err){console.error(\"Error loading jobs:\",err);setError(\"Failed to load your posted jobs. Please try again.\");}finally{setLoading(false);}};loadJobs();},[user,navigate]);const handleEditJob=jobId=>{navigate(\"/edit-job/\".concat(jobId));};const handleViewApplicants=jobId=>{navigate(\"/view-applicants/\".concat(jobId));};const handleDeleteJob=async jobId=>{if(window.confirm(\"Are you sure you want to delete this job posting? This action cannot be undone.\")){try{await deleteJob(jobId);// Remove the deleted job from the state\nsetJobs(jobs.filter(job=>job.job_id!==jobId));alert(\"Job deleted successfully!\");}catch(error){console.error(\"Error deleting job:\",error);alert(\"Failed to delete job. Please try again.\");}}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"my-jobs-container loading\",children:\"Loading your posted jobs...\"});}if(error){return/*#__PURE__*/_jsxs(\"div\",{className:\"my-jobs-container error\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Error\"}),/*#__PURE__*/_jsx(\"p\",{children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.location.reload(),children:\"Try Again\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"my-jobs-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"My Posted Jobs\"}),/*#__PURE__*/_jsx(\"div\",{className:\"action-bar\",children:/*#__PURE__*/_jsx(\"button\",{className:\"post-job-btn\",onClick:()=>navigate(\"/post-job\"),children:\"Post a New Job\"})}),jobs.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"no-jobs\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"You haven't posted any jobs yet.\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Start by posting your first job opening!\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"jobs-list\",children:jobs.map(job=>/*#__PURE__*/_jsxs(\"div\",{className:\"job-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"job-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:job.job_title}),/*#__PURE__*/_jsx(\"span\",{className:\"country-badge\",children:job.country})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"job-details\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"job-description\",children:job.job_description}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Skills Required:\"}),\" \",job.skills_required]}),job.salary&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Salary:\"}),\" \",job.salary]}),/*#__PURE__*/_jsxs(\"div\",{className:\"job-meta\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Posted:\"}),\" \",new Date(job.created_at).toLocaleDateString()]}),job.available_quantity&&/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Available Positions:\"}),\" \",job.available_quantity]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"job-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"view-applicants-btn\",onClick:()=>handleViewApplicants(job.job_id),children:\"View Applicants\"}),/*#__PURE__*/_jsx(\"button\",{className:\"edit-btn\",onClick:()=>handleEditJob(job.job_id),children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{className:\"delete-btn\",onClick:()=>handleDeleteJob(job.job_id),children:\"Delete\"})]})]},job.job_id))})]});};export default MyPostedJobs;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","fetchMyPostedJobs","deleteJob","useAuth","jsx","_jsx","jsxs","_jsxs","MyPostedJobs","user","navigate","jobs","setJobs","loading","setLoading","error","setError","role","loadJobs","jobsData","err","console","handleEditJob","jobId","concat","handleViewApplicants","handleDeleteJob","window","confirm","filter","job","job_id","alert","className","children","onClick","location","reload","length","map","job_title","country","job_description","skills_required","salary","Date","created_at","toLocaleDateString","available_quantity"],"sources":["C:/final_year_project/app/frontend/src/pages/recruiters/MyPostedJobs.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { fetchMyPostedJobs, deleteJob } from \"../../services/api\";\r\nimport { useAuth } from \"../../context/AuthContext\";\r\nimport \"../../styles/MyPostedJobs.css\";\r\n\r\nconst MyPostedJobs = () => {\r\n  const { user } = useAuth();\r\n  const navigate = useNavigate();\r\n  const [jobs, setJobs] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    // Redirect if not logged in as a recruiter\r\n    if (!user || user.role !== \"recruiter\") {\r\n      navigate(\"/employer-login\");\r\n      return;\r\n    }\r\n\r\n    const loadJobs = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const jobsData = await fetchMyPostedJobs();\r\n        setJobs(jobsData);\r\n        setError(null);\r\n      } catch (err) {\r\n        console.error(\"Error loading jobs:\", err);\r\n        setError(\"Failed to load your posted jobs. Please try again.\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadJobs();\r\n  }, [user, navigate]);\r\n\r\n  const handleEditJob = (jobId) => {\r\n    navigate(`/edit-job/${jobId}`);\r\n  };\r\n\r\n  const handleViewApplicants = (jobId) => {\r\n    navigate(`/view-applicants/${jobId}`);\r\n  };\r\n\r\n  const handleDeleteJob = async (jobId) => {\r\n    if (window.confirm(\"Are you sure you want to delete this job posting? This action cannot be undone.\")) {\r\n      try {\r\n        await deleteJob(jobId);\r\n        // Remove the deleted job from the state\r\n        setJobs(jobs.filter(job => job.job_id !== jobId));\r\n        alert(\"Job deleted successfully!\");\r\n      } catch (error) {\r\n        console.error(\"Error deleting job:\", error);\r\n        alert(\"Failed to delete job. Please try again.\");\r\n      }\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return <div className=\"my-jobs-container loading\">Loading your posted jobs...</div>;\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"my-jobs-container error\">\r\n        <h2>Error</h2>\r\n        <p>{error}</p>\r\n        <button onClick={() => window.location.reload()}>Try Again</button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"my-jobs-container\">\r\n      <h2>My Posted Jobs</h2>\r\n      \r\n      <div className=\"action-bar\">\r\n        <button \r\n          className=\"post-job-btn\"\r\n          onClick={() => navigate(\"/post-job\")}\r\n        >\r\n          Post a New Job\r\n        </button>\r\n      </div>\r\n\r\n      {jobs.length === 0 ? (\r\n        <div className=\"no-jobs\">\r\n          <p>You haven't posted any jobs yet.</p>\r\n          <p>Start by posting your first job opening!</p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"jobs-list\">\r\n          {jobs.map((job) => (\r\n            <div key={job.job_id} className=\"job-card\">\r\n              <div className=\"job-header\">\r\n                <h3>{job.job_title}</h3>\r\n                <span className=\"country-badge\">{job.country}</span>\r\n              </div>\r\n              \r\n              <div className=\"job-details\">\r\n                <p className=\"job-description\">{job.job_description}</p>\r\n                <p><strong>Skills Required:</strong> {job.skills_required}</p>\r\n                \r\n                {job.salary && <p><strong>Salary:</strong> {job.salary}</p>}\r\n                \r\n                <div className=\"job-meta\">\r\n                  <span><strong>Posted:</strong> {new Date(job.created_at).toLocaleDateString()}</span>\r\n                  {job.available_quantity && (\r\n                    <span><strong>Available Positions:</strong> {job.available_quantity}</span>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"job-actions\">\r\n                <button \r\n                  className=\"view-applicants-btn\"\r\n                  onClick={() => handleViewApplicants(job.job_id)}\r\n                >\r\n                  View Applicants\r\n                </button>\r\n                <button \r\n                  className=\"edit-btn\"\r\n                  onClick={() => handleEditJob(job.job_id)}\r\n                >\r\n                  Edit\r\n                </button>\r\n                <button \r\n                  className=\"delete-btn\"\r\n                  onClick={() => handleDeleteJob(job.job_id)}\r\n                >\r\n                  Delete\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MyPostedJobs;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,iBAAiB,CAAEC,SAAS,KAAQ,oBAAoB,CACjE,OAASC,OAAO,KAAQ,2BAA2B,CACnD,MAAO,+BAA+B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEvC,KAAM,CAAAC,YAAY,CAAGA,CAAA,GAAM,CACzB,KAAM,CAAEC,IAAK,CAAC,CAAGN,OAAO,CAAC,CAAC,CAC1B,KAAM,CAAAO,QAAQ,CAAGV,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACW,IAAI,CAAEC,OAAO,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CACpC,KAAM,CAACe,OAAO,CAAEC,UAAU,CAAC,CAAGhB,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACiB,KAAK,CAAEC,QAAQ,CAAC,CAAGlB,QAAQ,CAAC,IAAI,CAAC,CAExCC,SAAS,CAAC,IAAM,CACd;AACA,GAAI,CAACU,IAAI,EAAIA,IAAI,CAACQ,IAAI,GAAK,WAAW,CAAE,CACtCP,QAAQ,CAAC,iBAAiB,CAAC,CAC3B,OACF,CAEA,KAAM,CAAAQ,QAAQ,CAAG,KAAAA,CAAA,GAAY,CAC3B,GAAI,CACFJ,UAAU,CAAC,IAAI,CAAC,CAChB,KAAM,CAAAK,QAAQ,CAAG,KAAM,CAAAlB,iBAAiB,CAAC,CAAC,CAC1CW,OAAO,CAACO,QAAQ,CAAC,CACjBH,QAAQ,CAAC,IAAI,CAAC,CAChB,CAAE,MAAOI,GAAG,CAAE,CACZC,OAAO,CAACN,KAAK,CAAC,qBAAqB,CAAEK,GAAG,CAAC,CACzCJ,QAAQ,CAAC,oDAAoD,CAAC,CAChE,CAAC,OAAS,CACRF,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAEDI,QAAQ,CAAC,CAAC,CACZ,CAAC,CAAE,CAACT,IAAI,CAAEC,QAAQ,CAAC,CAAC,CAEpB,KAAM,CAAAY,aAAa,CAAIC,KAAK,EAAK,CAC/Bb,QAAQ,cAAAc,MAAA,CAAcD,KAAK,CAAE,CAAC,CAChC,CAAC,CAED,KAAM,CAAAE,oBAAoB,CAAIF,KAAK,EAAK,CACtCb,QAAQ,qBAAAc,MAAA,CAAqBD,KAAK,CAAE,CAAC,CACvC,CAAC,CAED,KAAM,CAAAG,eAAe,CAAG,KAAO,CAAAH,KAAK,EAAK,CACvC,GAAII,MAAM,CAACC,OAAO,CAAC,iFAAiF,CAAC,CAAE,CACrG,GAAI,CACF,KAAM,CAAA1B,SAAS,CAACqB,KAAK,CAAC,CACtB;AACAX,OAAO,CAACD,IAAI,CAACkB,MAAM,CAACC,GAAG,EAAIA,GAAG,CAACC,MAAM,GAAKR,KAAK,CAAC,CAAC,CACjDS,KAAK,CAAC,2BAA2B,CAAC,CACpC,CAAE,MAAOjB,KAAK,CAAE,CACdM,OAAO,CAACN,KAAK,CAAC,qBAAqB,CAAEA,KAAK,CAAC,CAC3CiB,KAAK,CAAC,yCAAyC,CAAC,CAClD,CACF,CACF,CAAC,CAED,GAAInB,OAAO,CAAE,CACX,mBAAOR,IAAA,QAAK4B,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CAAC,6BAA2B,CAAK,CAAC,CACrF,CAEA,GAAInB,KAAK,CAAE,CACT,mBACER,KAAA,QAAK0B,SAAS,CAAC,yBAAyB,CAAAC,QAAA,eACtC7B,IAAA,OAAA6B,QAAA,CAAI,OAAK,CAAI,CAAC,cACd7B,IAAA,MAAA6B,QAAA,CAAInB,KAAK,CAAI,CAAC,cACdV,IAAA,WAAQ8B,OAAO,CAAEA,CAAA,GAAMR,MAAM,CAACS,QAAQ,CAACC,MAAM,CAAC,CAAE,CAAAH,QAAA,CAAC,WAAS,CAAQ,CAAC,EAChE,CAAC,CAEV,CAEA,mBACE3B,KAAA,QAAK0B,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChC7B,IAAA,OAAA6B,QAAA,CAAI,gBAAc,CAAI,CAAC,cAEvB7B,IAAA,QAAK4B,SAAS,CAAC,YAAY,CAAAC,QAAA,cACzB7B,IAAA,WACE4B,SAAS,CAAC,cAAc,CACxBE,OAAO,CAAEA,CAAA,GAAMzB,QAAQ,CAAC,WAAW,CAAE,CAAAwB,QAAA,CACtC,gBAED,CAAQ,CAAC,CACN,CAAC,CAELvB,IAAI,CAAC2B,MAAM,GAAK,CAAC,cAChB/B,KAAA,QAAK0B,SAAS,CAAC,SAAS,CAAAC,QAAA,eACtB7B,IAAA,MAAA6B,QAAA,CAAG,kCAAgC,CAAG,CAAC,cACvC7B,IAAA,MAAA6B,QAAA,CAAG,0CAAwC,CAAG,CAAC,EAC5C,CAAC,cAEN7B,IAAA,QAAK4B,SAAS,CAAC,WAAW,CAAAC,QAAA,CACvBvB,IAAI,CAAC4B,GAAG,CAAET,GAAG,eACZvB,KAAA,QAAsB0B,SAAS,CAAC,UAAU,CAAAC,QAAA,eACxC3B,KAAA,QAAK0B,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzB7B,IAAA,OAAA6B,QAAA,CAAKJ,GAAG,CAACU,SAAS,CAAK,CAAC,cACxBnC,IAAA,SAAM4B,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAEJ,GAAG,CAACW,OAAO,CAAO,CAAC,EACjD,CAAC,cAENlC,KAAA,QAAK0B,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1B7B,IAAA,MAAG4B,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAAEJ,GAAG,CAACY,eAAe,CAAI,CAAC,cACxDnC,KAAA,MAAA2B,QAAA,eAAG7B,IAAA,WAAA6B,QAAA,CAAQ,kBAAgB,CAAQ,CAAC,IAAC,CAACJ,GAAG,CAACa,eAAe,EAAI,CAAC,CAE7Db,GAAG,CAACc,MAAM,eAAIrC,KAAA,MAAA2B,QAAA,eAAG7B,IAAA,WAAA6B,QAAA,CAAQ,SAAO,CAAQ,CAAC,IAAC,CAACJ,GAAG,CAACc,MAAM,EAAI,CAAC,cAE3DrC,KAAA,QAAK0B,SAAS,CAAC,UAAU,CAAAC,QAAA,eACvB3B,KAAA,SAAA2B,QAAA,eAAM7B,IAAA,WAAA6B,QAAA,CAAQ,SAAO,CAAQ,CAAC,IAAC,CAAC,GAAI,CAAAW,IAAI,CAACf,GAAG,CAACgB,UAAU,CAAC,CAACC,kBAAkB,CAAC,CAAC,EAAO,CAAC,CACpFjB,GAAG,CAACkB,kBAAkB,eACrBzC,KAAA,SAAA2B,QAAA,eAAM7B,IAAA,WAAA6B,QAAA,CAAQ,sBAAoB,CAAQ,CAAC,IAAC,CAACJ,GAAG,CAACkB,kBAAkB,EAAO,CAC3E,EACE,CAAC,EACH,CAAC,cAENzC,KAAA,QAAK0B,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1B7B,IAAA,WACE4B,SAAS,CAAC,qBAAqB,CAC/BE,OAAO,CAAEA,CAAA,GAAMV,oBAAoB,CAACK,GAAG,CAACC,MAAM,CAAE,CAAAG,QAAA,CACjD,iBAED,CAAQ,CAAC,cACT7B,IAAA,WACE4B,SAAS,CAAC,UAAU,CACpBE,OAAO,CAAEA,CAAA,GAAMb,aAAa,CAACQ,GAAG,CAACC,MAAM,CAAE,CAAAG,QAAA,CAC1C,MAED,CAAQ,CAAC,cACT7B,IAAA,WACE4B,SAAS,CAAC,YAAY,CACtBE,OAAO,CAAEA,CAAA,GAAMT,eAAe,CAACI,GAAG,CAACC,MAAM,CAAE,CAAAG,QAAA,CAC5C,QAED,CAAQ,CAAC,EACN,CAAC,GAvCEJ,GAAG,CAACC,MAwCT,CACN,CAAC,CACC,CACN,EACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAAvB,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}