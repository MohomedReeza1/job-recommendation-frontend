{"ast":null,"code":"import _objectSpread from\"C:/final_year_project/app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from\"react\";import{loginJobSeeker}from\"../services/api\";import\"../styles/JobSeekerLogin.css\";import{useAuth}from\"../context/AuthContext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const JobSeekerLogin=()=>{const{login}=useAuth();const[formData,setFormData]=useState({email:\"\",password:\"\"});const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const handleChange=e=>{const{name,value}=e.target;setFormData(_objectSpread(_objectSpread({},formData),{},{[name]:value}));};const handleSubmit=async e=>{e.preventDefault();setLoading(true);setError(null);try{// Use the API function instead of direct API call\nconst response=await loginJobSeeker(formData.email,formData.password);// Log the full response for debugging\nconsole.log(\"Login data received:\",response);// Extract user details\nconst userData={email:formData.email,role:response.role,user_id:response.user_id,token:response.access_token,specific_id:response.specific_id};if(userData.role!==\"job_seeker\"){setError(\"You are trying to log in as a job seeker with an employer account.\");setLoading(false);return;}// Store user data in AuthContext and localStorage\nlogin(userData);// Don't navigate here - let the AuthContext handle it\n}catch(error){var _error$response,_error$response$data;console.error(\"Login error:\",error);setError(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.detail)||\"Invalid email or password.\");}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"login-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Job Seeker Login\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",placeholder:\"Email\",value:formData.email,onChange:handleChange,required:true,disabled:loading}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",placeholder:\"Password\",value:formData.password,onChange:handleChange,required:true,disabled:loading}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,children:loading?\"Logging in...\":\"Login\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Don't have an account? \",/*#__PURE__*/_jsx(\"a\",{href:\"/signup\",children:\"Sign up here\"})]})]});};export default JobSeekerLogin;","map":{"version":3,"names":["React","useState","loginJobSeeker","useAuth","jsx","_jsx","jsxs","_jsxs","JobSeekerLogin","login","formData","setFormData","email","password","loading","setLoading","error","setError","handleChange","e","name","value","target","_objectSpread","handleSubmit","preventDefault","response","console","log","userData","role","user_id","token","access_token","specific_id","_error$response","_error$response$data","data","detail","className","children","onSubmit","type","placeholder","onChange","required","disabled","href"],"sources":["C:/final_year_project/app/frontend/src/pages/JobSeekerLogin.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { loginJobSeeker } from \"../services/api\";\r\nimport \"../styles/JobSeekerLogin.css\";\r\nimport { useAuth } from \"../context/AuthContext\"; \r\n\r\nconst JobSeekerLogin = () => {\r\n  const { login } = useAuth();\r\n  const [formData, setFormData] = useState({\r\n    email: \"\",\r\n    password: \"\",\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData({ ...formData, [name]: value });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError(null);\r\n    \r\n    try {\r\n        // Use the API function instead of direct API call\r\n        const response = await loginJobSeeker(formData.email, formData.password);\r\n\r\n        // Log the full response for debugging\r\n        console.log(\"Login data received:\", response);\r\n\r\n        // Extract user details\r\n        const userData = {\r\n            email: formData.email,\r\n            role: response.role,\r\n            user_id: response.user_id,\r\n            token: response.access_token,\r\n            specific_id: response.specific_id\r\n        };\r\n\r\n        if (userData.role !== \"job_seeker\") {\r\n            setError(\"You are trying to log in as a job seeker with an employer account.\");\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        // Store user data in AuthContext and localStorage\r\n        login(userData);\r\n\r\n        // Don't navigate here - let the AuthContext handle it\r\n    } catch (error) {\r\n        console.error(\"Login error:\", error);\r\n        setError(error.response?.data?.detail || \"Invalid email or password.\");\r\n    } finally {\r\n        setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"login-container\">\r\n      <h2>Job Seeker Login</h2>\r\n      {error && <div className=\"error-message\">{error}</div>}\r\n      <form onSubmit={handleSubmit}>\r\n        <input\r\n          type=\"email\"\r\n          name=\"email\"\r\n          placeholder=\"Email\"\r\n          value={formData.email}\r\n          onChange={handleChange}\r\n          required\r\n          disabled={loading}\r\n        />\r\n        <input\r\n          type=\"password\"\r\n          name=\"password\"\r\n          placeholder=\"Password\"\r\n          value={formData.password}\r\n          onChange={handleChange}\r\n          required\r\n          disabled={loading}\r\n        />\r\n        <button type=\"submit\" disabled={loading}>\r\n          {loading ? \"Logging in...\" : \"Login\"}\r\n        </button>\r\n      </form>\r\n      <p>Don't have an account? <a href=\"/signup\">Sign up here</a></p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default JobSeekerLogin;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}